<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Entry Details</title>
</head>
<body>

    <div style="padding: 20px;">
        <a href="{{ url_for('main.profile') }}">â† Back to Dashboard</a>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div style="max-width: 800px; margin: 0 auto; margin-bottom: 20px;">
                {% for category, message in messages %}
                    <div style="padding: 15px; border-radius: 5px; text-align: center;
                        background-color: {% if category == 'error' %} #f8d7da {% else %} #d4edda {% endif %};
                        color: {% if category == 'error' %} #721c24 {% else %} #155724 {% endif %};
                        border: 1px solid {% if category == 'error' %} #f5c6cb {% else %} #c3e6cb {% endif %};">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <div style="max-width: 800px; margin: 0 auto; padding: 20px;">

        <h2 style="color: #555;">{{ entry.created_at.strftime('%B %d, %Y') }}</h2>

        <div style="margin-bottom: 20px;">
            {% for mood in entry.moods %}
                <span style="background-color: #e0e0e0; padding: 5px 10px; border-radius: 15px; margin-right: 5px; font-size: 14px;">
                    {{ mood.label }}
                </span>
            {% endfor %}
        </div>

        <hr>

        <div style="font-size: 18px; line-height: 1.6; margin: 30px 0; white-space: pre-wrap; text-align: center">
            {{ entry.content }}
        </div>

        <hr>

        <div style="background-color: #f8f9fa; padding: 20px; border-radius: 10px; border: 1px solid #ddd; text-align: center;">
            <h3>ğŸ¤– AI Insights</h3>

            {% if entry.ai_summary %}
                <p><strong>Summary:</strong> {{ entry.ai_summary }}</p>
                <p><strong>Music Vibe:</strong> {{ entry.music_query }}</p>
            {% else %}
                <p>This entry hasn't been analyzed yet.</p>
                <form method="POST" action="#"> <button type="submit" style="padding: 10px 20px; background-color: #6f42c1; color: white; border: none; cursor: pointer; font-size: 16px;">
                        âœ¨ Analyze with AI
                    </button>
                </form>
            {% endif %}
        </div>

    </div>

    <div style="display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 30px; margin-bottom: 50px;">

        <a href="{{ url_for('main.update_entry', entry_id=entry.id) }}" style="text-decoration: none;">
            <button style="background-color: #ffc107; color: black; border: none; padding: 10px 20px; cursor: pointer; border-radius: 5px; font-size: 16px;">
                âœï¸ Edit Entry
            </button>
        </a>

        <form action="{{ url_for('main.delete_entry', entry_id=entry.id) }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this?');" style="margin: 0;">
            <button type="submit" style="background-color: #d86f6f; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 5px; font-size: 16px;">
                ğŸ—‘ï¸ Delete Entry
            </button>
        </form>

    </div>

</body>
</html>